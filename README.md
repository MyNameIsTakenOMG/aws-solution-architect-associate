# aws-solution-architect-associate
## Table of Contents
 - [AWS Cloud](#aws-cloud)
 - [AWS IAM](#aws-iam)
 - [EC2 Basics](#ec2-basics)
 - [EC2 Associate](#ec2-associate)
 - [EC2 Instance Storage](#ec2-instance-storage)
 - [High Availability and Scalability](#high-availability-and-scalability)
 - [RDS Aurora and ElastiCache](#rds-aurora-and-elasticache)
 - [Route53](#route53)
 - [Classic Solutions Architecture](#classic-solutions-architecture)
 - [S3](#s3)
 - [S3 Advanced](#s3-advanced)
 - [S3 Security](#s3-security)
 - [CloudFront and Global Accelerator](#cloudfront-and-global-accelerator)
 - [AWS Storage Extras](#aws-storage-extras)
 - [AWS Integration and Messaging](#aws-integration-and-messaging)
 - [Containers on AWS](#containers-on-aws)
 - [Serverless Overview](#serverless-overview)
 - [Serverless Architecture](#serverless-architecture)
 - [Databases in AWS](#databases-in-aws)
 - [Data and Analytics](#data-and-analytics)
 - [Machine Learning](#machine-learning)
 - [AWS Monitoring Audit and Performance](#aws-monitoring-audit-and-performance)
 - [AWS IAM Advanced](#aws-iam-advanced)
 - [AWS Security and Encryption](#aws-security-and-encryption)
 - [AWS VPC](#aws-vpc)
 - [Disaster Recovery and Migration](#disaster-recovery-and-migration)
 - [More Solutions Architecture](#more-solutions-architecture)
 - [Other services](#other-services)
 - [White Papers and Architectures](#white-papers-and-architectures)

## AWS Cloud
 - AWS Global Infrastructure:
   - AWS Regions: clusters of data centers (Most AWS services are region-scoped)
   - AWS Availability Zones
   - AWS Data Centers
   - AWS Edge Locations /Points of Presence
 - How to choose an AWS Region?
   - Compliance with data governance and legal requirements: data never leaves a region without your explicit permission
   - Proximity to customers: reduced latency
   - Available services within a Region: new services and new features aren’t available in every Region
   - Pricing: pricing varies from region to region and is transparent on the service pricing page
 - AWS Availability Zones: (min-3, max-6 per region, each AZ has one or more discrete data centers (separated))
 - AWS Points of Presence (Edge Locations): Content is delivered to end users with lower latency
 - services:
   - Global: IAM, Route53, Cloudfront, WAF
   - Region(most services): EC2(IaaS), Elastic Beanstalk(PaaS), Lambda(FaaS), Rekognition(SaaS)

## AWS IAM
 - Users and Groups: Root Account, Users and Groups(only contain users)
 - IAM-Permissions: JSON files called policies -- apply the privilege principle, don't give more permissions than a user needs.
 - IAM policies inheritance: users who belong to multiple groups can inherit multiple permissions
 - IAM policies structure: version(required), id(optional), statement(required)
   - statement: Sid(statement id--optional),Effect(allow/deny), Principal(to whom this policy applied to), Action(list of allow/deny), Resource(list of resources the actions applied to), Condition(conditions for when this policy takes effect)
 - IAM password policy
   - strong password = high security
   - password policy:
     - min length
     - specific char types
     - allow all iam users to change their passwords
     - password expiration
     - prevent password re-use
 - Multi-Factor Authentication - MFA: Password + MFA = Successful Login
 - How can users access AWS?
   - AWS Console (password + MFA)
   - AWS CLI(access key): alternative to AWS Console
   - AWS SDK(access key)
   - access key id & access key secret (don't share access keys)
 - IAM Roles for Services: an IAM role contains IAM permissions will be assigned to certain AWS services to perform some actions
 - IAM Security Tools:
   - IAM Credentials Report (account-level): a report that lists all your account's users and the status of their various credentials
   - IAM Access Advisor (user-level): Access advisor shows the service permissions granted to a user and when those services were last accessed. You can use this information to revise your policies.
## EC2 Basics
 - EC2 = Elastic Compute Cloud = Infrastructure as a Service
 - EC2: renting virtual machine (EC2), storing data on virtual drives(EBS), distributing traffic across machines(ELB), Scaling (ASG)
 - EC2 sizing & configuration options:
   - OS: Linux, Windows, MacOS
   - CPU & RAM
   - storage: instance store(hardware), network-attached (EBS&EFS)
   - Network card: speed of the card, public IP
   - Firewall rules: security group
   - Bootstrap script (configure at first launch): EC2 User Data
     - launching commands when an EC2 instance starts (only first start, run once)
     - install software, updates, download files from internet or something else
     - user data script runs with root user
 - EC2 instance type:
   - naming convention: m5.2xlarge (m instance class, 5 generation, 2xlarge size within the instance class)
   - general purpose: great for a diversity of workloads such as web servers or code repositories, which strike the balance between compute, memory, and network
   - compute optimized: great for compute-intensive tasks that require high-performance CPUs: Batch processing, media transcoding, gaming server, machine learning.
   - memory optimized: great for processing large data sets in memory: real-time processing big unstructured data, BI, high-performance database
   - storage optimized: great for storage-intensive tasks that require high, sequential read and write access to large data sets on local storage: Data warehousing applications, High frequency online transaction processing (OLTP) systems.
 - Security Groups(stateful, NACL--stateless):  fundamental of network security in AWS,  control how traffic is allowed into or out of our EC2 Instances.
   - only contain rules
   - Security groups rules can reference by IP or by security group
     - ports
     - IP ranges - IPV4 / IPV6
     - inbound / outbound
   - can be attached to multiple instances
   - locked down to region/VPC
   - live outside of EC2
   - good to maintain a separated security group for SSH
 - Classic Ports: 22-SSH, 21-FTP, 22-Sftp, 80-HTTP, 443-HTTPS, 3389-RDP (Remote Desktop Protocol) – log into a Windows instance
 - SSH: one of the most important function. It allows you to control a remote machine, all using the command line.
 - EC2 Instance Connect: no need for access key file, open within a browser, a temporary key will be used (only works with aws linux2), and make sure to open port 22
 - EC2 Instances Purchasing Options:
   - On-Demand Instances – short-term and un-interrupted workload, predictable pricing, pay by second and for what you use
   - Reserved (1 & 3 years): 
     - Reserved Instances – long workloads, save up to 72% compared to on-demand , instance's scope -- regional or zonal, long-term and steady workloads, such as database
     - Convertible Reserved Instances – long workloads with flexible instances, save up to 66% compared to on-demand (can change instance type, family, OS, scope and tenancy)
   - Savings Plans (1 & 3 years): save up to 72%, locked down to instance family and region – a commitment to an amount of usage, long workload
   - Spot Instances: save up to 90%, most cost-effient – short workloads, cheap, can lose instances (less reliable), great for workloads that are resilient to failure(such as batch job, data analysis, any distributed job, image processing, etc), but not for critical jobs
   - Dedicated Hosts – book an entire physical server, control instance placement, allows to address compliance requirements and use existing server-bound software licenses. Most expensive, on-demand/reserved(1 or 3 yrs)
   - Dedicated Instances – no other customers will share your hardware, but may share hardware with other instances in the same account. The hardware is dedicated to you, no control over instance placement.
   - Capacity Reservations – reserve on-demand instances capacity in a **specific AZ** for any duration
 - Which purchasing option is right for me?
   - On-demand: coming and staying in resort whenever we like, we pay the full price
   - Reserved: like planning ahead and if we plan to stay for a long time, we may get a good discount.
   - Savings Plans: pay a certain amount per hour for certain period and stay in any room type (e.g., King, Suite, Sea View, …)
   - Spot instances: the hotel allows people to bid for the empty rooms and the highest bidder keeps the rooms. You can get kicked out at any time
   - Dedicated Hosts: We book an entire building of the resort
   - Capacity Reservations: you book a room for a period with full price even you don’t stay in it
 - EC2 Spot Instance Requests: define **max spot price** , when **current spot price** > **max spot price**, can choose to **stop** or **terminate** with 2 min grace period. Or **Spot Block** to **block** the instances during a specified time frame with interruptions.
 - How to terminate Spot Instances? you must first cancel a **spot request**, and then terminate the associated spot instances.
 - Spot Fleets: a set of spot instances + (optional)on-demand instances
   - trying to meet the target capacity with price constraints(define launch pools)
   - strategies to allocate spot instances: lowestPrice, diversified, capacityOptimized, priceCapacityOptimized(recommended)
   - Spot Fleets allow us to automatically request Spot Instances with the lowest price
## EC2 Associate
 - Private vs public IP (IPV4)
   - public IP: machine can be identified on the internet, meaning it's unique across the internet and can be geo-located easily.
   - private IP: machine can only be identified on a private network, meaning it's unique across the private network, connecting to public internet via NAT and internet gateway. Besides, only a specified range of IPs can be used as private IPs
 - Elastic IP: a fixed public IP for your EC2 instance, can only be attached to one instance at a time.
   - can only have up to 5 Elastic IPs in your account (ask aws to increase)
   - can quickly remap the address to another instance when another was failed
   - Overall, try to avoid using Elastic IP: 1)often reflect poor architectural decisions. 2)instead, use a random public IP with a registered DNS name. 3)or using a load balancer.
 - by default, each EC2 instance has a public IP and a private IP
 - Placement Groups:
   - strategies: 1)Cluster—clusters instances into a low-latency group in a single Availability Zone. 2)Spread—spreads instances across underlying hardware (max 7 instances per group per AZ). 3)Partition—spreads instances across many different partitions (which rely on different sets of racks) within an AZ. Scales to 100s of EC2 instances per group (Hadoop, Cassandra, Kafka)
 - Elastic Network Interfaces (ENI): Logical component in a VPC that represents a virtual network card. Can be created independently and attach them on the fly on EC2 instances for failover. ENI is bound to specific AZ.
   - Primary private IPv4, one or more secondary IPv4
   - One Elastic IP (IPv4) per private IPv4
   - One Public IPv4
   - One or more security groups
   - A MAC address
 - EC2 Hibernate: 1)the RAM state is written into root EBS(must be encrypted). 2)long-running processing, services that take time to initialize
   - the instance RAM size must be less then **150GB**
   - cannot be in the state of hibernate more than **60 days**
   - available for **on-demand, spot** instance
## EC2 Instance Storage
 - EBS Volume: An EBS (Elastic Block Store) Volume is a network drive you can attach to your instances while they run. It allows your instances to persist data, even after their termination(Root EBS will be terminated by default, can be turned off). It is bound to a specific availability zone(**AZ**). To move around, we need snapshot.
 - EBS – Delete on Termination attribute: by default, root EBS will be deleted, any other EBS will be kept. The behaviour of both types of EBS can be modified via console or CLI.
 - EBS Snapshots: Make a backup (snapshot) of your EBS volume at a point in time. Not necessary to detach volume to do snapshot, but recommended. Can copy snapshots across AZ or Region
 - EBS Snapshots Features:
   - EBS Snapshot Archive: 75% cheaper than normal snapshot. Takes within 24 to 72 hours for restoring the archive
   - Recycle Bin for EBS Snapshots: Setup rules to retain deleted snapshots so you can recover them after an accidental deletion. Specify retention (from 1 day to 1 year)
   - Fast Snapshot Restore (FSR): Force full initialization of snapshot to have no latency on the first use ($$$)
 - AMI Overview (Amazon Machine Image)
   - AMI are a customization of an EC2 instance
   - AMI are built for a specific region (and can be copied across regions):
     - Faster boot / configuration time because all your software is pre-packaged
     - You add your own software, configuration, operating system, monitoring…
   - You can launch EC2 instances from: A Public AMI(AWS provided), Your own AMI(you make and maintain them yourself), An AWS Marketplace AMI: an AMI someone else made (and potentially sells)
 - AMI Process (from an EC2 instance)
   - Start an EC2 instance and customize it
   - Stop the instance (for data integrity)
   - Build an AMI – this will also create EBS snapshots(behind the scenes)
   - Launch instances from other AMIs
 - EC2 Instance Store
   - EBS volumes are network drives with good but “limited” performance
   - If you need a **high-performance hardware disk**, use EC2 Instance Store
   - great I/O, EC2 Instance Store lose their storage if they’re stopped (ephemeral). Good for buffer / cache / scratch data / temporary content.Risk of data loss if hardware fails. Backups and Replication are your responsibility.
 - EBS Volume Types
   - EBS Volumes come in 6 types
     - gp2 / gp3 (SSD): General purpose SSD volume that balances price and performance for a wide variety of workloads
       - use case: 1GB--16TB, gp3: baseline (3000I/O, 125MB/s), up to 16000I/O, 1000MB/s independently. gp2: burst to 3000I/O, size and I/O linked, max 16000I/O
     - io1 / io2 (SSD): Highest-performance SSD volume for mission-critical low-latency or high-throughput workloads
       - use case: more than 16000I/O, Great for databases workloads (sensitive to storage perf and consistency), io1/io2 (4 GiB - 16 TiB): size and I/O independent, max 64000I/O for Nitro & 32000 for other. io2 Block Express (4 GiB – 64 TiB):Sub-millisecond latency, Max PIOPS: 256,000 with an IOPS:GiB ratio of 1,000:1. **Supports EBS Multi-attach**
     - st1 (HDD): Low cost HDD volume designed for frequently accessed, throughput-intensive workloads
     - sc1 (HDD): Lowest cost HDD volume designed for less frequently accessed workloads
       - use case(HDD): Cannot be a boot volume. 125 GiB to 16 TiB. st1: Max throughput 500 MiB/s – max IOPS 500, Big Data, Data Warehouses, Log Processing. sc1: Max throughput 250 MiB/s – max IOPS 250, Scenarios where lowest cost is important
   - EBS Volumes are characterized in Size | Throughput | IOPS (I/O Ops Per Sec)
   - **Only gp2/gp3 and io1/io2 can be used as boot volumes**
 - EBS Multi-Attach – io1/io2 family
   - Attach the same EBS volume to multiple EC2 instances in the same AZ
   - Each instance has full read & write permissions to the high-performance volume
   - Up to 16 EC2 Instances at a time
   - Use case: Achieve higher application availability in clustered Linux applications (ex: Teradata). Applications must manage concurrent write operations
   - Must use a file system that’s cluster-aware (not XFS, EXT4, etc…)
 - EBS Encryption
   - Encryption and decryption are handled transparently (you have nothing to do)
   - Encryption has a minimal impact on latency
   - EBS Encryption leverages keys from KMS (AES-256)
   - **Copying an unencrypted snapshot allows encryption**
   -  encrypted EBS volume: data at rest, data in flight , snapshots, volumes from snapshots are all encrypted
   -  Snapshots of encrypted volumes are encrypted
 - Encryption: encrypt an unencrypted EBS volume: create a snapshot from an unencrypted EBS, then using **copy** operation to encrypt the snapshot, then create an EBS from the snapshot.
 - Amazon EFS – Elastic File System
   - Managed NFS (network file system) that can be mounted on many EC2
   - EFS works with EC2 instances in multi-AZ
   - Highly available, scalable, expensive (3x gp2), pay per use
   - Use cases: content management, web serving, data sharing, Wordpress
   - Uses NFSv4.1 protocol, and use security group to control access to EFS
   - **Compatible with Linux based AMI (not Windows)**
   - Encryption at rest using KMS
   - POSIX file system (~Linux) that has a standard file API
   - File system scales automatically, pay-per-use, no capacity planning!
 - EFS – Performance & Storage Classes
   - EFS Scale: 1000s of concurrent NFS clients, 10 GB+ /s throughput, Grow to Petabyte-scale network file system, automatically
   - Performance Mode (set at EFS creation time): General Purpose (default)--web server, CMS,etc... Max I/O--big data, media processing
   - Throughput Mode: Bursting , Provisioned(regardless size), Elastic
   - Storage Tiers (lifecycle management feature– move file after N days): Standard, Infrequent access (EFS-IA)
   - Availability and durability: Standard--multi-AZ, One Zone -- could save 90% cost
## High Availability and Scalability
## RDS Aurora and ElastiCache
## Route53
## Classic Solutions Architecture
 - stateless web app(maybe some api endpoints): Route53 -- client -- ELBs(ALB):Multi-AZ -- ASG(multi-az): EC2 reserved capacity (cost-saving)
   - cost: ASG to ensure right amount of EC2 instances, and reserved capacity instances
   - performance: ELB and ASG
   - reliability: Route53 reliably 'direct' traffic to the ELB
   - security: security group for EC2 instances
   - operational experience: from manually managing EC2 instances to automatically managing EC2 using ASG
 - stateful web app(such as online shopping web):
   - Route53 -- client -- ELB: multi-az -- ASG(multi-az): EC2 instances -- ElastiCache(multi-az) (store session data or cache query data(lazy-loading)) + RDS(multi-az,read replicas) /DynamoDB/...
   - security groups: elastiCache or DBs secruity groups restricted from EC2 security groups
 - stateful web app(such as wordpress web):
   - we can use Aurora multi-az to go very scalable and available, and as for storing images, we can choose EFS or S3(more preferred nowadays)
 - Instantiating Applications quickly
   - EC2 Instances:
     - Use a Golden AMI: Install your applications, OS dependencies etc.. beforehand and launch your EC2 instance from the Golden AMI
     - Bootstrap using User Data: For dynamic configuration, use User Data scripts
     - Hybrid: mix Golden AMI and User Data (Elastic Beanstalk)
   - RDS Databases: Restore from a snapshot: the database will have schemas and data ready!
   - EBS Volumes: Restore from a snapshot: the disk will already be formatted and have data!
 - Elastic Beanstalk – Overview
   - It uses all the component’s we’ve seen before: EC2, ASG, ELB, RDS, …
   - We still have full control over the configuration
   - Managed service:
     - Automatically handles capacity provisioning, load balancing, scaling, application health monitoring, instance configuration, …
     - only application code is the responsibility for the developer
 - Elastic Beanstalk – Components
   - Application: collection of Elastic Beanstalk components (environments, versions, configurations, …)
   - Application Version: an iteration of your application code
   - Environment: Collection of AWS resources running an application version (only one application version at a time)
     - Tiers: Web Server Environment Tier & Worker Environment Tier
     - You can create multiple environments (dev, test, prod, …)

## S3
## S3 Advanced
## S3 Security
## CloudFront and Global Accelerator
## AWS Storage Extras
## AWS Integration and Messaging
## Containers on AWS
## Serverless Overview
## Serverless Architecture
## Databases in AWS
## Data and Analytics
## Machine Learning
 - Rekognition: face detection, content moderation(Set a **Minimum Confidence Threshold** for items that will be flagged. Flag sensitive content for manual review in
Amazon Augmented AI (A2I)), labeling, celebrity recognition -- detect objects, people, text, and scenes in images or videos
 - Transcribe:  convert speech to text (ex: subtitles). 1)Uses a deep learning process called automatic speech recognition (ASR) to convert speech to text quickly and accurately. 2)Automatically remove Personally Identifiable Information (PII) using Redaction. 3)Supports Automatic Language Identification for multi-lingual audio.
 - Polly: text to lifelike speech using deep learning. **Lexicon(Customize the pronunciation of words with Pronunciation lexicons) &  Speech Synthesis Markup Language (SSML, more customization)**
 - Translate: translations,  localize content
 - Lex: build conversational bots – chatbots
 - Connect:  cloud-based virtual contact center
 - Comprehend: natural language processing(NLP). Analyzing text to find insights and relationships. **Amazon Comprehend Medical**: detects and returns useful information in
unstructured clinical text. Uses NLP to detect **Protected Health Information (PHI)** – DetectPHI API.
 - SageMaker: machine learning for every developer and data scientist, easy-to-train models.
 - Forecast: build highly accurate forecasts -- feeding data and then training the model, last using the model to predict
 - Kendra: ML-powered search engine -- extract and index contents from documents of different formats, and then make the results indexable.
 - Personalize: real-time personalized recommendations, integrates into existing websites, apps, SMS, email marketing system
 - Textract: detect text and data in any scanned documents of any type
## AWS Monitoring Audit and Performance
 - Amazon CloudWatch Metrics: metrics for every service in AWS. Metrics belong to namespaces. Dimension is an attribute of a metric(up to 30). Metrics have timestamps. Custom metrics can be created.
 - CloudWatch Metric Streams: Continually stream CloudWatch metrics to a destination of your choice, with **near-real-time** delivery and low latency (Kinesis Data Firehose, or 3rd party services, such as datadog). Optionally, **filter metrics** to only stream a subset of them.
 - CloudWatch Logs: Log groups representing an application. log stream(instance in apps or containers). destinations: s3, opensearch, lambda, kinesis data streams, kinesis data firehose. Encrypted by default, can be encrypted using custom key.
 - CloudWatch logs sources: SDK, CloudWatch Logs Agent, CloudWatch Unified Agent, Elastic Beanstalk, ECS, AWS Lambda, VPC Flow Logs, API Gateway, CloudTrail, Route53.
 - CloudWatch Logs Insights: Search and analyze log data stored in CloudWatch Logs. Provides a purpose-built query language. Can query multiple Log Groups in different AWS accounts. It’s a query engine, not a real-time engine.
 - CloudWatch Logs – S3 Export: take up to 12 hrs. API call(CreateExportTask). Not near-real-time or real-time… use Logs Subscriptions instead.
 - CloudWatch Logs Subscriptions:  get real-time logs from cloudwatch, and send to Kinesis Data Streams, Kinesis Data Firehose, or Lambda. **Subscription Filter(filter logs)**.
 - CloudWatch Logs AggregationMulti-Account & Multi-Region: [account1/region1...] -> [Subscription Filter...] -> Kinesis Data Streams -> Kinesis Data Firehose -> S3.
 - CloudWatch Logs Subscriptions: Cross-Account Subscription – send log events to resources in a different AWS account (KDS, KDF) (**in this case, we need modify the destination cloudwatch service's access policy to accept the logs from the original cloudwatch service. meanwhile, we need a IAM role to allow kinesis data streams to collect logs**)
 - CloudWatch Logs for EC2: we need **cloudwatch logs agent** running on the EC2 instances with proper IAM permissions.
 - CloudWatch Logs Agent & Unified Agent: logs agent -- old version, can only send logs to cloudwatch. unified agent -- collect and send logs as well as additional system-level metrics such as RAM, CPU. Centralized configuration using SSM Parameter Store.
 - CloudWatch Unified Agent – Metrics : CPU, RAM, DISK metrics, Netstat, processes, swap space(free, used)
 - CloudWatch Alarms: used to trigger notifications for any metrics
   - Various options (sampling, %, max, min, etc…)
   - Alarm States: OK, INSUFFICIENT_DATA, ALARM
   - Period: Length of time in seconds to evaluate the metric (High resolution custom metrics: 10 sec, 30 sec or multiples of 60 sec)
   - target: EC2, ASG, SNS
 - CloudWatch Alarms – Composite Alarms: CloudWatch Alarms are on a single metric. Composite Alarms are monitoring the states of multiple other alarms. AND and OR conditions. Helpful to reduce “alarm noise” by creating complex composite alarms.
 - EC2 Instance Recovery:
   - status checks: instance status and system status
 - Good to know: 1)Alarms can be created based on CloudWatch Logs Metrics Filters. 2)to test alarms and notifications, we can use CLI to manually change alarm state.
 - Amazon EventBridge:
   - schedule: cron jobs
   - event pattern: Event rules to react to a service doing something
   - trigger lambda, SNS/SQS, ...
   - can also use event filter
   - Event buses can be accessed by other AWS accounts using Resource-based Policies
   - You can archive events (all/filter) sent to an event bus (indefinitely or set period)
   - Ability to replay archived events
 - Amazon EventBridge – Schema Registry
   - EventBridge can analyze the events in your bus and infer the schema
   - The Schema Registry allows you to generate code for your application, that will know in advance how data is structured in the event bus
   - Schema can be versioned
 - Amazon EventBridge – Resource-based Policy
   - Manage permissions for a specific Event Bus
   - Example: allow/deny events from another AWS account or AWS region
 - CloudWatch Container Insights
   - Collect, aggregate, summarize metrics and logs from containers
   - containers in ECS, EKS, K8S on EC2, Fargate
   - In Amazon EKS and Kubernetes, CloudWatch Insights is using a containerized version of the CloudWatch Agent to discover containers
 - CloudWatch Lambda Insights
   - Monitoring and troubleshooting solution for serverless applications running on AWS Lambda
   - collect system-level metrics, such as CPU, diagnostic information, such as cold start
   - Lambda Insights is provided as a Lambda Layer
 - CloudWatch Contributor Insights
   - Analyze log data and create time series that display contributor data. (See metrics about the top-N contributors)
   - For example, you can find bad hosts, identify the heaviest network users, or find the URLs that generate the most errors.
   - You can build your rules from scratch, or you can also use sample rules that AWS has created – leverages your CloudWatch Logs
 - CloudWatch Application Insights (powered by sageMaker)
   - Provides automated dashboards that show potential problems with monitored applications, to help isolate ongoing issues
   - Findings and alerts are sent to Amazon EventBridge and SSM OpsCenter
 - AWS CloudTrail
   - Provides governance, compliance and audit for your AWS Account
   - CloudTrail is enabled by default!
   - Get an history of events / API calls made within your AWS Account. Can put logs from CloudTrail into CloudWatch Logs or S3
   - A trail can be applied to All Regions (default) or a single Region.
   - If a resource is deleted in AWS, investigate CloudTrail first!
 - CloudTrail Events
   - Management Events: By default, trails are configured to log management events.
     - Can separate Read Events (that don’t modify resources) from Write Events (that may modify resources)
     - Operations that are performed on resources in your AWS account
   - Data Events: By default, data events are not logged (because high volume operations)
   - CloudTrail Insights Events: Enable CloudTrail Insights to detect unusual activity in your account
     - CloudTrail Insights analyzes normal management events to create a baseline
     - And then continuously analyzes write events to detect unusual patterns, send insight events to S3, eventBridge, or cloudtrail console
 - CloudTrail Events Retention: 90 days in cloudtrail, or send to S3 and use Athena for long-term storage
 - CloudTrail + EventBridge
 - AWS Config:  a per-region service
   - Can be aggregated across regions and accounts
   - Helps with auditing and recording compliance of your AWS resources. Helps record configurations and changes over time
   - You can receive alerts (SNS notifications) for any changes
   - Possibility of storing the configuration data into S3 (analyzed by Athena)
 - Config Rules
   - Can use AWS managed config rules (over 75)
   - Can make custom config rules (must be defined in AWS Lambda)
   - Rules can be evaluated / triggered: for each configuration change or at regular intervals
   - AWS Config Rules does not prevent actions from happening (no deny)
   - pricing: no free tier
 - Config Rules – Remediations
   - Automate remediation of non-compliant resources using SSM Automation Documents
   - Use AWS-Managed Automation Documents or create custom Automation Documents
   - You can set Remediation Retries if the resource is still non-compliant after auto-remediation
 - Config Rules – Notifications
   - Use EventBridge to trigger notifications when AWS resources are non-compliant
   - Ability to send configuration changes and compliance state notifications to SNS (all events – use SNS Filtering or filter at client-side)
 - CloudWatch vs CloudTrail vs Config
   - CloudWatch:
     - Performance monitoring (metrics, CPU, network, etc…) & dashboards
     - Events & Alerting
     - Log Aggregation & Analysis
   - CloudTrail:
     - Record API calls made within your Account by everyone
     - Can define trails for specific resources
     - Global Service
   - Config
     - Record configuration changes
     - Evaluate resources against compliance rules
     - Get timeline of changes and compliance
 - For an Elastic Load Balancer (Example)
   - CloudWatch:
     - Monitoring Incoming connections metric
     - Visualize error codes as % over time
     - Make a dashboard to get an idea of your load balancer performance
   - CloudTrail:
     - Track who made any changes to the Load Balancer with API calls
   - Config:
     - Track security group rules for the Load Balancer
     - Track configuration changes for the Load Balancer
     - Ensure an SSL certificate is always assigned to the Load Balancer (compliance)
## AWS IAM Advanced
## AWS Security and Encryption
 - Encryption in flight (TLS / SSL): Data is encrypted before sending and decrypted after receiving
 - Server-side encryption at rest: Data is encrypted after being received by the server and decrypted before being sent. The encryption/decryption keys must be managed somewhere, and the server must have access to it
 - Client-side encryption: Data is encrypted by the client and never decrypted by the server, Data will be decrypted by a receiving client
 - AWS KMS (Key Management Service): manages encryption keys for us, fully integrated with IAM for authorization, easy way to control access to your data
   - Able to audit KMS Key usage using CloudTrail
   - Seamlessly integrated into most AWS services (EBS, S3, RDS, SSM…)
   - Never ever store your secrets in plaintext, especially in your code! Use the KMS key to encrypt your secrets so that they can be stored in the code or config file.
 - KMS Keys Types
   - Symmetric (AES-256 keys): must call KMS API to use
   - Asymmetric (RSA & ECC key pairs): Public (Encrypt) and Private Key (Decrypt) pair
   - AWS Owned Keys (free): SSE-S3, SSE-SQS, SSE-DDB (default key)
   - AWS Managed Key: free (aws/service-name, example: aws/rds or aws/ebs)
   - Customer managed keys
   - Automatic Key rotation:
     - AWS-managed KMS Key: automatic every 1 year
     - Customer-managed KMS Key: (must be enabled) automatic every 1 year
     - Imported KMS Key: only manual rotation possible using alias
 - Copying Snapshots across regions: have a snapshot encrypted with key1, then copy it and encrypt it with key2 in another region.
 - KMS Key Policies (similar to S3 bucket policy, which is a resource access policy), the difference is without this policy no one can access it.
   - Default KMS Key Policy: created if customers don't provide one, and allows anyone to access it.
   - Custom KMS Key Policy: define users, roles who can access it, and who can administer it. useful for cross-account access of your key.
   - Copying Snapshots across accounts:
     - Create a Snapshot, encrypted with your own KMS Key (Customer Managed Key)
     - Attach a KMS Key Policy to authorize cross-account access
     - Share the encrypted snapshot
     - (in target) Create a copy of the Snapshot, encrypt it with a CMK in your account
     - Create a volume from the snapshot
 - KMS Multi-Region Keys
   - Identical KMS keys in different AWS Regions that can be used interchangeably
   - No need to re-encrypt or making cross-Region API calls
   - KMS Multi-Region are NOT global (Primary + Replicas)
   - Each Multi-Region key is managed independently, each has their own key policies
   - Use cases: global client-side encryption, encryption on Global DynamoDB ( encrypt specific attributes client-side using Amazon DynamoDB Encryption Client), Global Aurora(encrypt specific attributes client-side using AWS Encryption SDK, we can protect specific fields even from database admins)
 - S3 Replication Encryption Considerations
   - Unencrypted objects and objects encrypted with SSE-S3 are replicated by default
   - Objects encrypted with SSE-C (customer provided key) can be replicated
   - For objects encrypted with SSE-KMS, you need to enable the option
     - Specify which KMS Key to encrypt the objects within the target bucket
     - Adapt the KMS Key Policy for the target key
     - An IAM Role with kms:Decrypt for the source KMS Key and kms:Encrypt for the target KMS Key for S3 replication service
     - You might get KMS throttling errors, in which case you can ask for a Service Quotas increase
   - You can use multi-region AWS KMS Keys, but they are currently treated as independent keys by Amazon S3 (the object will still be decrypted and then encrypted)
 - AMI Sharing Process Encrypted via KMS (cross-account)
   - AMI in Source Account is encrypted with KMS Key from Source Account
   - Must modify the image attribute to add a Launch Permission which corresponds to the specified target AWS account
   - Must share the KMS Keys used to encrypted the snapshot the AMI references with the target account / IAM Role
   - The IAM Role/User in the target account must have the permissions to DescribeKey, ReEncrypted, CreateGrant, Decrypt
   - When launching an EC2 instance from the AMI, optionally the target account can specify a new KMS key in its own account to re-encrypt the volumes
 - SSM Parameter Store: Secure storage for configuration and secrets, optionally can use KMS for encryption, version tracking, security through IAM, notification from EventBridge, integration with CloudFormation
 - SSM Parameter Store Hierarchy: (eg. /awef/awfea/wafw... )
 - SSM Parameter tier (standard & advanced)
   - Parameters Policies (for advanced parameters)
     - Allow to assign a TTL to a parameter (expiration date) to force updating or deleting sensitive data such as passwords
     - Can assign multiple policies at a time
 - AWS Secrets Manager: meant for storing secrets
   - Capability to force rotation of secrets every X days
   - Automate generation of secrets on rotation (uses Lambda)
   - Integration with Amazon RDS (MySQL, PostgreSQL, Aurora)
   - Secrets are encrypted using KMS
   - Mostly meant for RDS integration
 - AWS Secrets Manager – Multi-Region Secrets
   - Replicate Secrets across multiple AWS Regions
   - Secrets Manager keeps read replicas in sync with the primary Secret
   - Ability to promote a read replica Secret to a standalone Secret
   - Use cases: multi-region apps, disaster recovery strategies, multi-region DB…
 - AWS Certificate Manager (ACM)
   - Easily provision, manage, and deploy TLS Certificates
   - Supports both public( free) and private TLS certificates
   - Automatic TLS certificate renewal
   - Cannot use ACM with EC2 (can’t be extracted)
   - Integrations with ELB, CloudFront, API Gateway
 - ACM – Requesting Public Certificates
   - List domain names to be included in the certificate
   - Select Validation Method: DNS Validation or Email validation
   - It will take a few hours to get verified
   - The Public Certificate will be enrolled for automatic renewal (60 days before expiry)
 - ACM – Importing Public Certificates
   - Option to generate the certificate outside of ACM and then import it
   - No automatic renewal
   - ACM sends daily expiration events
   - AWS Config has a managed rule named acm-certificate-expiration-check to check for expiring certificates (configurable number of days)
 - ACM – Integration with ALB
 - API Gateway - Endpoint Types
   - Edge-Optimized (default)
   - Regional
   - Private
 - ACM – Integration with API Gateway
   - Create a Custom Domain Name in API Gateway
   - Edge-Optimized (default): The TLS Certificate must be in the same region as CloudFront, in us-east-1. The API Gateway still lives in only one region. Then setup CNAME or (better) A-Alias record in Route 53
   - Regional: The TLS Certificate must be imported on API Gateway, in the same region as the API Stage. Then setup CNAME or (better) A-Alias record in Route 53.
 - AWS WAF – Web Application Firewall: Protects your web applications from common web exploits (Layer 7 HTTP)
   - deploy on: ALB, API Gateway, CloudFront, AppSync GraphQL API, Cognito User Pool
   - Define Web ACL (Web Access Control List) Rules: IP set, SQL injection and XSS, Size constraints, geo-match (block countries), Rate-based rules (to count occurrences of events) – for DDoS protection
   - Web ACL are Regional except for CloudFront
   - A rule group is a reusable set of rules that you can add to a web ACL
 - WAF – Fixed IP while using WAF with a Load Balancer
   - ALB doesn't have a fixed IP, but we can use Global Accelerator with fixed IPs, then apply WAF onto ALB
 - AWS Shield: protect from DDoS attack:
   - DDoS: Distributed Denial of Service – many requests at the same time
   - AWS Shield Standard: free and activated for every AWS customer
   - AWS Shield Advanced:  automatically creates, evaluates and deploys AWS WAF rules to mitigate layer 7 attacks. Optional DDoS mitigation service. Protect against more sophisticated attack on Amazon EC2, Elastic Load Balancing (ELB), Amazon CloudFront, AWS Global Accelerator, and Route 53.
 - AWS Firewall Manager: Manage rules in all accounts of an AWS Organization
   - Security policy: common set of security rules
   - Rules are applied to new resources as they are created (good for compliance) across all and future accounts in your Organization
 - WAF vs. Firewall Manager vs. Shield
   - WAF, Shield and Firewall Manager are used together for comprehensive protection
   - Define your Web ACL rules in WAF, For granular protection of your resources, WAF alone is the correct choice
   - use Firewall Manager with AWS WAF to apply protection across accounts
   - Shield Advanced adds additional features on top of AWS WAF
   - If you’re prone to frequent DDoS attacks, consider purchasing Shield Advanced
 - AWS Best Practices for DDoS Resiliency
   - Edge Location Mitigation:
     - CloudFront: natural defense to DDoS
     - Global Accelerator: integrate with AWS Shield to defend DDoS
     - Route 53: Domain Name Resolution to defend DDoS
   - Best pratices for DDoS mitigation
     - Infrastructure layer defense: using Global Accelerator, Route 53, CloudFront, Elastic Load Balancing
     - Amazon EC2 with Auto Scaling: in case traffic reach EC2 instances
     - Elastic Load Balancing: scales along with incoming traffic and distribute the traffic
   - Application Layer Defense
     - Detect and filter malicious web requests
       - CloudFront cache and block specific geographies
       - WAF on CloudFront and ELB to filter and block certain requests, also the rate-based rules and managed rules can be used to block certain IPs
     - Shield Advanced:  automatic application layer DDoS mitigation automatically creates, evaluates and deploys AWS WAF rules to mitigate layer 7 attacks
   - Attack surface reduction
     - Obfuscating AWS resources: use CloudFront, ELB, and API Gateway to hide backend
     - Security groups and Network ACLs: Use security groups and NACLs to filter traffic based on specific IP at the subnet or ENI-level. Elastic IP are protected by AWS Shield Advanced
     - Protecting API endpoints: hide backend, Edge-optimized mode, or CloudFront + regional mode (more control for DDoS), WAF + API Gateway: burst limits, headers filtering, use API keys
 - Amazon GuardDuty: Intelligent Threat discovery to protect your AWS Account
   - input data: CloudTrail Events Logs, VPC Flow Logs, DNS Logs, Optional Features(other services logs or events)
   - can setup EventBridge rules
   - Can protect against CryptoCurrency attacks (has a dedicated “finding” for it)
 - Amazon Inspector: Automated Security Assessments on
   - EC2 instances
   - Container Images push to Amazon ECR
   - Lambda Functions
   - Reporting & integration with AWS Security Hub, Send findings to Amazon Event Bridge
   - What does Amazon Inspector evaluate? Remember: only for EC2 instances, Container Images & Lambda functions
     - Continuous scanning of the infrastructure, only when needed
     - Package vulnerabilities (EC2, ECR & Lambda) – database of CVE
     - Network reachability (EC2)
     - A risk score is associated with all vulnerabilities for prioritization
 - AWS Macie
   - a fully managed data security and data privacy service that uses machine learning and pattern matching to discover and protect your sensitive data in AWS.
   - Macie helps identify and alert you to sensitive data, such as personally identifiable information (PII)

## AWS VPC
 - Understanding CIDR (Classless Inter-Domain Routing) – IPv4: Base IP and Subnet Mask
 - private vs public IP (IPV4)
   - private IP: 10.0.0.0/8 (big networks), 172.16.0.0/12 (AWS default VPC), 192.168.0.0/16 (home networks)'
   - All the rest of the IP addresses on the Internet are public
 - Default VPC: new EC2 instances launched in default VPC if no subnet specified, has internet connectivity and ec2 instances have public ips, private or public DNS names.
 - VPC in AWS – IPv4
   - multiple VPCs in an AWS region (max. 5 per region – soft limit)
   - Max. CIDR per VPC is 5, for each CIDR:
     - Min. size is /28 (16 IP addresses)
     - Max. size is /16 (65536 IP addresses)
   - Because VPC is private, only the Private IPv4 ranges are allowed
   - Your VPC CIDR should **NOT overlap** with your other networks (e.g.,corporate)
 - VPC – Subnet (IPv4)
   - AWS reserves 5 IP addresses (first 4 & last 1) in each subnet
 - Internet Gateway (IGW): at the VPC level, provide IPv4 & IPv6 Internet Access
 - Route Tables: must be edited to add routes from subnets to the IGW, VPC Peering Connections, VPC Endpoints, …
 - Bastion Host:  public EC2 instance to SSH into, that has SSH connectivity to EC2 instances in private subnets
 - NAT Instances: gives Internet access to EC2 instances in private subnets. Old, must be setup in a public subnet, disable Source / Destination check flag
 - NAT Gateway – managed by AWS, provides scalable Internet access to private EC2 instances, IPv4 only
 - NACL – stateless, subnet rules for inbound and outbound, don’t forget Ephemeral Ports
 - Security Groups – stateful, operate at the EC2 instance level
 - VPC Peering – connect two VPCs with non overlapping CIDR, non-transitive
 - VPC Endpoints: Interface endpoint( Provisions an ENI (private IP address) as an entrypoint (must attach a Security Group), S2S VPN, Direct Connect, different VPC) , Gateway endpoint( free, S3 and DynamoDB)
 - VPC Flow Logs: can be setup at the VPC / Subnet / ENI Level, for ACCEPT and REJECT traffic, helps identifying attacks, analyze using Athena or CloudWatch Logs Insights
 - Site-to-Site VPN – setup a Customer Gateway on DC, a Virtual Private Gateway on VPC, and site-to-site VPN over public Internet
 - AWS VPN CloudHub – hub-and-spoke VPN model to connect your sites
 - Direct Connect – setup a Virtual Private Gateway on VPC, and establish a direct private connection to an AWS Direct Connect Location
 - Direct Connect Gateway – setup a Direct Connect to many VPCs in different AWS regions
 - AWS PrivateLink / VPC Endpoint Services:
   - Connect services privately from your service VPC to customers VPC
   - Doesn’t need VPC Peering, public Internet, NAT Gateway, Route Tables
   - Must be used with Network Load Balancer & ENI
 - ClassicLink – connect EC2-Classic EC2 instances privately to your VPC
 - Transit Gateway – transitive peering connections for VPC, VPN & DX
 - Traffic Mirroring – copy network traffic from ENIs for further analysis
 - Egress-only Internet Gateway – like a NAT Gateway, but for IPv6 (doesn't allow the outside network to initialize the connection first)
 - Networking Costs in AWS per GB - Simplified
   - Use Private IP instead of Public IP for good savings and better network performance
   - Use same AZ for maximum savings (at the cost of high availability)
   - free for traffic-in and server-private-server(or EC2) in the same AZ, cost a little for AZ-1 -private- AZ-2, cost a bit more for AZ-1 -public- AZ-2, cost more for Region-1 -public- REgion-2
 - Minimizing egress traffic network cost
   - Try to keep as much internet traffic within AWS to minimize costs
   - outbound traffic free
   - Direct Connect location that are co-located in the same AWS Region result in lower cost for egress network
 - S3 Data Transfer Pricing – Analysis for USA
   - ingress free
   - to internet : 0.09$/GB
   - transfer acceleration with edge locations: +0.04$/GB - 0.08$/GB
   - cloudFront: 0.085$/GB (slightly cheaper): caching, reduce cost associated with S3 requests
   - cross-region: 0.02$/GB
 - Pricing: NAT Gateway vs Gateway VPC Endpoint
   - for private subnet EC2 instances, VPC endpoint can save a lot (for S3, using gateway endpoint:free, only charge for data transfer)
 - Network Protection on AWS
   - Network Access Control Lists (NACLs)
   - Amazon VPC security groups
   - AWS WAF (protect against malicious requests)
   - AWS Shield & AWS Shield Advanced
   - AWS Firewall Manager (to manage them across accounts)
   - AWS Network Firewall (VPC)
     - From Layer 3 to Layer 7 protection: VPC-VPC, inbound/outbound, VPC-S2S VPN| Direct Connect
     - can be centrally managed cross-account by AWS Firewall Manager to apply to many VPCs
     - supports 1000 rules: IP &port, Protocol, stateful domain list, general pattern using regex
     - Traffic filtering: Allow, drop, or alert for the traffic that matches the rules
     - Active flow inspection to protect against network threats with intrusion-prevention capabilities (like Gateway Load Balancer, but all managed by AWS)
     - Send logs of rule matches to Amazon S3, CloudWatch Logs, Kinesis Data Firehose
## Disaster Recovery and Migration
 - Overview:
   - Disaster recovery (DR) is about preparing for and recovering from a disaster
   - types of DR:
     - On-premise => On-premise: traditional DR, and very expensive
     - On-premise => AWS Cloud: hybrid recovery
     - AWS Cloud Region A => AWS Cloud Region B
   - RPO(Recovery Point Objective -- data lose) and RTO (Recovery Time Objective -- down time)
   - Disaster Recovery Strategies
     - Backup and Restore (High RPO, either AWS storage gateway and snow family or schedule regular snapshots)
     - Pilot Light (core functionality is always running, such as database) -- data replication
     - Warm Standby (minimal version of full system is running, quickly to scale up ) -- data replication
     - Hot Site / Multi Site Approach (very low RTO, pricy, full production scale is always running on-prem and AWS)
   - DR Tips:
     - Backup
       - EBS or RDS snapshots/backups, etc
       - regular push to S3/ S3 IA/ Glacier, lifecycle policy, cross-region replication
       - from on-premise: snowball or storage gateway
     - High Availability
       - use Route53 to migrate DNS from region to region
       - RDS multi-AZ, elastiCache multi-AZ, EFS, S3
       - S2S VPN as failover for Direct Connect
     - Replication
       - RDS cross-region replica, Aurora + global database
       - storage gateway
       - on-prem DB to RDS
     - Automation
       - CloudFormation/ Elastic Beanstalk to re-create a whole new env
       - recover EC2 instances when Cloudwatch alarms
       - Lambda functions for customized automation
     - chaos
       - Netflix has a “simian-army” randomly terminating EC2
 - DMS – Database Migration Service: Quickly and securely migrate databases to AWS, resilient, self-healing
   - The source database remains available during the migration
   - an EC2 instance is a must for running DMS
   - Continuous Data Replication using CDC
   - supports: Homogeneous migrations / Heterogeneous migrations
   - Source and Target: take a DB and export or import it onto any DBs that AWS supports
   - AWS Schema Conversion Tool (SCT)
     - Convert your Database’s Schema from one engine to another
     - You do not need to use SCT if you are migrating the same DB engine
   - DMS - Continuous Replication: install and setup SCT(schema convertion tool) on-prem to convert the schema, and have an EC2 instance with DMS and CDC(change data capture) installed to do continuous replication
   - AWS DMS – Multi-AZ Deployment
     - When Multi-AZ Enabled, DMS provisions and maintains a synchronous stand replica in a different AZ
     - Advantages:
       - provider data redundancy
       - eliminate I/O freeze
       - minimize latency spike
 - RDS & Aurora MySQL Migrations
   - RDS MySQL to Aurora MySQL
     - Option 1: DB Snapshots from RDS MySQL restored as MySQL Aurora DB
     - Option 2: Create an Aurora Read Replica from your RDS MySQL, and when the replication lag is 0, promote it as its own DB cluster (can take time and cost $)
   - External MySQL to Aurora MySQL
     - Option 1: use Percona Xtrabackup to create a backup file in S3, then import the file into Aurora
     - Option 2: create Aurora mysql DB, then use the **mysqldump** utility to migrate Mysql to Aurora (slower than S3)
   - Use DMS if both databases are up and running
 - RDS & Aurora PostgreSQL Migrations
   - RDS PostgreSQL to Aurora PostgreSQL : similar to how migrate RDS mysql to Aurora myssql
   - External PostgreSQL to Aurora PostgreSQL: create a backup file in S3, then import it into Aurora postgres using **aws_s3 Aurora extension**
   - Use DMS if both databases are up and running
 - On-Premise strategy with AWS
   - Ability to download Amazon Linux 2 AMI as a VM (.iso format): VMWare, KVM, VirtualBox (Oracle VM), Microsoft Hyper-V.
   - VM Import / Export: Migrate existing applications into EC2. Create a DR repository strategy for your on-premises VMs. Can export back the VMs from EC2 to on-premises.
   - AWS Application Discovery Service: gather info on on-prem servers to plan a migration. Server utilization and dependency mappings. Track with AWS Migration Hub
   - AWS Database Migration Service (DMS): works with various DBs, can do on-prem <--> AWS, AWS <--> AWS
   - AWS Server Migration Service (SMS): Incremental replication of on-premises live servers to AWS
 - AWS Backup (fully managed, no need for custom script or manual process)
   - Centrally manage and automate backups across AWS services
   - support cross-account / cross-region backups
   - support many services
   - Supports PITR for supported services
   - On-Demand and Scheduled backups
   - Tag-based backup policies
   - You create backup policies known as Backup Plans: backup frequency, backup window, transition to cold storage, retention period
 - AWS Backup Vault Lock (Backup Vault Lock Policy)
   - Enforce a WORM (Write Once Read Many) state for all the backups that you store in your AWS Backup Vault
   - Additional layer of defense to protect your backups against
   - Even the root user cannot delete backups when enabled
 - AWS Application Discovery Service + AWS Application Migration Service (MGN)
   - Plan migration projects by gathering information about on-premises data centers. Server utilization data and dependency mapping are important for migrations
   - Agentless Discovery (AWS Agentless Discovery Connector) / Agent-based Discovery (AWS Application Discovery Agent)
   - Resulting data can be viewed within AWS Migration Hub
   - Lift-and-shift (rehost) solution which simplify migrating applications to AWS
   - Converts your physical, virtual, and cloud-based servers to run natively on AWS (staging: low-cost EC2 instances & EBS volumes, then perform a cutover to switch to production: target EC2 instances and EBS volumes)
   - Supports wide range of platforms, Operating Systems, and databases
   - Minimal downtime, reduced costs
 - Transferring large amount of data into AWS
   - Example: transfer 200 TB of data in the cloud. We have a 100 Mbps internet connection.
   - 1)Over the internet / Site-to-Site VPN: quick setup, but takes very long time
   - 2)Over direct connect 1Gbps: long time to setup(more than 1 month), much quicker than the first way
   - 3)Over Snowball: Will take 2 to 3 snowballs in parallel and take about 1 week for e2e transfer, and can be combined with DMS
   - 4)For on-going replication / transfers: Site-to-Site VPN or DX with DMS or DataSync
 - VMware Cloud on AWS
   - Some customers use VMware Cloud to manage their on-premises Data Center. They want to extend the Data Center capacity to AWS, but keep using the VMware Cloud software. Enter VMware Cloud on AWS
   - use cases: Migrate your VMware vSphere-based workloads to AWS
   - Run your production workloads across VMware vSphere-based private, public, and hybrid cloud environments
   - Have a disaster recover strategy
## More Solutions Architecture
 - Event processing in AWS:
   - Lambda, SQS, SNS:
     - SQS ---> Lambda, then SQS send ---> DLQ
     - SQS FIFO ---> Lambda, then SQS send ---> DLQ 
     - SNS async---> Lambda(retry), then Lambda send DLQ ---> SQS
   - fan-out pattern:
     - SDK ---> SNS ---> SQS *n (subscribed)
   - S3 Event notifications : S3 send:events ---> SQS, SNS, Lambda
   - S3 Event notifications with EventBridge:
     - S3 send:events ---> EventBridge ---> over 18 AWS services as destinations
     - Advanced filtering options with JSON rules (metadata, object size, name...)
     - Multiple Destinations – ex Step Functions, Kinesis Streams / Firehose…
     - EventBridge Capabilities – Archive, Replay Events, Reliable delivery
   - Amazon EventBridge – Intercept API Calls: CloudTrail will catch any API calls and send corresponding events to the EVentBridge, and EventBridge will send events or alerts to certain destination, such as SNS.
   - API Gateway – AWS Service Integration Kinesis Data Streams example (external events):
     - client send requests ---> API Gateway ---> Kinesis Data Stream ---> Kinesis Data Firehose ---> S3
 - Caching Strategies:
   - client ---> CloudFront ---> API Gateway ---> App logic (EC2 / Lambda) ---> Databases / (ElastiCache or DAX) // dynamic routes with dynamic contents
     - CloudFront(edge) ---> S3 // static contents
   - Caching, TTL, Network, Computation, Cost, latency
   - CloudFront: help cache contents at the edge location which is close to the end users (setup TTL in case of any change of the contents)
   - API Gateway (regional): cache between clients and API gateway
   - the backend logic doesn't have any cache capability, but the in-memory DB or DAX could help cache some complicated queries
   - there's no cache in S3 buckets or DBs.
 - Blocking an IP address
   - with NACL as well as security group, we can deny certain IP addresses
   - for NLB(fixed IP address), ALB, make sure security group for EC2 instances allow traffic from load balancers
   - for ALB, we can use WAF to do some more complex IP filtering
   - with CloudFront, we can restrict IPs from certain geo-locations, and also by using WAF, we can block certain IPs
 - High Performance Computing (HPC): quickly add resources within no time and pay only what you use, then what services help perform HPC?
   - Data Management & Transfer:
     - AWS Direct Connect: Move GB/s of data to the cloud, over a private secure network
     - Snowball & Snowmobile: Move PB of data to the cloud
     - AWS DataSync: Move large amount of data between on-premises and S3, EFS, FSx for Windows
   - Compute and Networking
     - EC2 Instances: CPU optimized, GPU optimized, Spot Instances / Spot Fleets for cost savings + Auto Scaling
     - EC2 Placement Groups: Cluster for good network performance
     - EC2 Enhanced Networking (SR-IOV)
       - Higher bandwidth, higher PPS (packet per second), lower latency
       - Option 1: **Elastic Network Adapter (ENA)** up to 100 Gbps
       - Option 2: Intel 82599 VF up to 10 Gbps – LEGACY
     - **Elastic Fabric Adapter (EFA)**
       - Improved ENA for HPC, only works for Linux
       - Great for inter-node communications, tightly coupled workloads
       - Leverages Message Passing Interface (MPI) standard
       - **Bypasses the underlying Linux OS to provide low-latency, reliable transport**
   - Storage
     - Instance-attached storage:
       - EBS: scale up to 256,000 IOPS with io2 Block Express
       - Instance Store: scale to millions of IOPS, linked to EC2 instance, low latency
     - Network storage:
       - Amazon S3: large blob, not a file system
       - Amazon EFS: scale IOPS based on total size, or use provisioned IOPS
       - Amazon FSx for Lustre: HPC optimized distributed file system, millions of IOPS. Backed by S3
   - Automation and Orchestration
     - AWS Batch: AWS Batch supports multi-node parallel jobs, which enables you to run single jobs that span multiple EC2 instances. Easily schedule jobs and launch EC2 instances accordingly.
     - AWS ParallelCluster: Open-source cluster management tool to deploy HPC on AWS. Configure with text files. Automate creation of VPC, Subnet, cluster type and instance types. Ability to enable EFA on the cluster (improves network performance)
 - Creating a highly available EC2 instance
   - having a standby EC2 instance, cloudwatch and lambda (start the standby instance and attach it with the elastic IP)
   - using ASG, and user data attachment based on Tag for elastic IP
   - ASG + EBS, ASG terminate lifecycle hook: create an EBS snapshot with tag, then when a new instance launched in a new AZ, ASG launch lifecycle hook: create EBS volume from the snapshot.
## Other services
 - CloudFormation: a declarative way of outlining your AWS Infrastructure, for any resources (most of them are supported).
   - CloudFormation creates any resources for you based on your requirements, in the right order, with the exact configuration that you specify
   - Infrastructure as code
   - cost: Savings strategy: In Dev, you could automation deletion of templates at 5 PM and recreated at 8 AM, safely. Each resources within the stack is tagged with an identifier so you can easily see how much a stack costs you
   - Productivity: Ability to destroy and re-create an infrastructure on the cloud on the fly
   - Don’t re-invent the wheel: using exiting template or documentation
   - Supports (almost) all AWS resources: You can use “custom resources” for resources that are not supported
   - CloudFormation Stack Designer
 - Amazon Simple Email Service (Amazon SES): Fully managed service to send emails securely, globally and at scale
 - Amazon Pinpoint: Scalable 2-way (outbound/inbound) marketing communications service ( email, SMS, push, voice, and in-app messaging)
   - Versus Amazon SNS or Amazon SES: In Amazon Pinpoint, you create message templates, delivery schedules, highly-targeted segments, and full campaigns. In SNS & SES you managed each message's audience, content, and delivery schedule
 - Systems Manager – SSM Session Manager: Allows you to start a secure shell on your EC2 and on-premises servers (no need port 22, SSH access key, bastion host, just need IAM permission)
 - Systems Manager – Run Command: Execute a document (= script) or just run a command on multiple instances. no need SSH. Output sent to S3 or cloudwatch log. send notifications to SNS. can be invoke by EventBridge. Integrate with IAM and CloudTrail
 - Systems Manager – Patch Manager: Automates the process of patching managed instances. Support multiple OS and EC2 and on-prem. Patch on-demand or scheduled using **Maintenance Window**. Scan instances and generate patch compliance report (missing patches)
 - Systems Manager – Maintenance Windows: Defines a schedule for when to perform actions on your instances
   - schedule
   - duration
   - Set of registered instances
   - Set of registered tasks
 - Systems Manager - Automation
   - Simplifies common maintenance and deployment tasks of EC2 instances and other AWS resources
   - Examples: restart instances, create an AMI, EBS snapshot
   - Automation Runbook – SSM Documents to define actions preformed on your EC2 instances or AWS resources (pre-defined or custom)
   - Can be triggered using: AWS Console, AWS CLI or SDK, EventBridge, On a schedule using Maintenance Windows, By AWS Config for rules remediations
 - Cost Explorer: Visualize, understand, and manage your AWS costs and usage over time (monthly,hourly...) 
   - Choose an optimal Savings Plan (to lower prices on your bill)
   - Forecast usage up to 12 months based on previous usage
 - Amazon Elastic Transcoder: Elastic Transcoder is used to convert media files stored in S3 into media files in the formats required by consumer playback devices (phones, etc..)
   - s3 input --> transcoder --> s3 output --> client
   - highly scalable, easy-to-use, cost-effective, fully managed&secure, pay what you use
 - AWS Batch: Fully managed batch processing at any scale(100,000s)
   - dynamically launch EC2 instances or Spot Instances
   - provisions the right amount of compute / memory
   - submit or schedule batch jobs and AWS Batch does the rest!
   - Batch jobs are defined as Docker images and run on ECS
   - Helpful for cost optimizations and focusing less on the infrastructure
 - AWS Batch vs Lambda(serverless, limited time, limited runtimes, Limited temporary disk space)
   - No time limit
   - Any runtime as long as it’s packaged as a Docker image
   - Rely on EBS / instance store for disk space
   - Relies on EC2 (can be managed by AWS)
 - Amazon AppFlow: Fully managed integration service that enables you to securely transfer data between Software-as-a-Service (SaaS) applications and AWS
   - source: Salesforce, SAP, Zendesk, Slack, and ServiceNow
   - destination: AWS services like Amazon S3, Amazon Redshift or non-AWS such as SnowFlake and Salesforce
   - on-demand or schedule
   - data transformation
   - Encrypted over the public internet or privately over AWS PrivateLink (VPC endpoint)
   - Don’t spend time writing the integrations and leverage APIs immediately
 - AWS Amplify - web and mobile applications version of Elastic Beanstalk: A set of tools and services that helps you develop and deploy scalable full-stack web and mobile applications
## White Papers and Architectures
- Well-Architected Framework General Guiding Principles
  - Stop guessing your capacity needs
  - Test systems at production scale
  - Automate to make architectural experimentation easier
  - Allow for evolutionary architectures: Design based on changing requirements
  - Drive architectures using data
  - Improve through game days: Simulate applications for flash sale days
- Well-Architected Framework 6 Pillars
  - 1) Operational Excellence
  - 2) Security
  - 3) Reliability
  - 4) Performance Efficiency
  - 5) Cost Optimization
  - 6) Sustainability
  - 7) They are not something to balance, or trade-offs, they’re a synergy
- AWS Well-Architected Tool: Free tool to review your architectures against the 6 pillars Well-Architected Framework and adopt architectural best practices
- Trusted Advisor: high level AWS account assessment on 5 categories:
  - Cost optimization
  - Performance
  - Security
  - Fault tolerance
  - Service limits
- Trusted Advisor – Support Plans
  - Basic & Developer Support plan:7 CORE CHECKS
    - S3 Bucket Permissions
    - Security Groups – Specific Ports Unrestricted
    - IAM Use (one IAM user minimum)
    - MFA on Root Account
    - EBS Public Snapshots
    - RDS Public Snapshots
    - Service Limits
  - Business & Enterprise Support plan: Full Checks available on the 5 categories. Programmatic Access using AWS Support API. Ability to set CloudWatch alarms when
reaching limits





